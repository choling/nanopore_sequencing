<tool id="sam-bam conversion" name="SAM-to-sorted-BAM" version="0.1.0">
    <description>Convert sam to sorted bam</description>
    <requirements>
        <requirement type="package" version="1.4">samtools</requirement>
    </requirements>
    <stdio>
        <exit_code range="1:" />
    </stdio>
    <command><![CDATA[
        sh /home/ec2-user/galaxy/tools/nanopore_sequencing/last/sam-to-sorted-bam.sh "$input1" "$input2" > "$output1"
    ]]></command>
    <inputs>
	<param type="data" name="input1" format="data" label="reference genome" />
	<param type="data" name="input2" format="sam" label="sam file" />
    </inputs>
    <outputs>
	<data name="output1" format="bam"
    </outputs>
    <tests>
	<test>
	    <param name="input1" value="ecoli_MG1655.fasta" />
	    <param name="input2" value="test_ecoli_R73.sam" />
	    <param name="output1" file="test_ecoli_R73.sorted.bam" />
	</test>
    </tests>
    <help><![CDATA[
        
Usage: samtools view [options] <in.bam>|<in.sam>|<in.cram> [region ...]

Options:
  -b       output BAM
  -C       output CRAM (requires -T)
  -1       use fast BAM compression (implies -b)
  -u       uncompressed BAM output (implies -b)
  -h       include header in SAM output
  -H       print SAM header only (no alignments)
  -c       print only the count of matching records
  -o FILE  output file name [stdout]
  -U FILE  output reads not selected by filters to FILE [null]
  -t FILE  FILE listing reference names and lengths (see long help) [null]
  -L FILE  only include reads overlapping this BED FILE [null]
  -r STR   only include reads in read group STR [null]
  -R FILE  only include reads with read group listed in FILE [null]
  -q INT   only include reads with mapping quality >= INT [0]
  -l STR   only include reads in library STR [null]
  -m INT   only include reads with number of CIGAR operations consuming
           query sequence >= INT [0]
  -f INT   only include reads with all bits set in INT set in FLAG [0]
  -F INT   only include reads with none of the bits set in INT set in FLAG [0]
  -s FLOAT subsample reads (given INT.FRAC option value, 0.FRAC is the
           fraction of templates/read pairs to keep; INT part sets seed)
  -x STR   read tag to strip (repeatable) [null]
  -B       collapse the backward CIGAR operation
  -?       print long help, including note about region specification
  -S       ignored (input format is auto-detected)
      --input-fmt-option OPT[=VAL]
               Specify a single input file format option in the form
               of OPTION or OPTION=VALUE
  -O, --output-fmt FORMAT[,OPT[=VAL]]...
               Specify output format (SAM, BAM, CRAM)
      --output-fmt-option OPT[=VAL]
               Specify a single output file format option in the form
               of OPTION or OPTION=VALUE
  -T, --reference FILE
               Reference sequence FASTA FILE [null]
  -@, --threads INT
               Number of additional threads to use [0]


    ]]></help>
    <citations>
        <citation type="bibtex">
@misc{rename,
  author = {Li, H. and Handsaker, B. and Wysoker, A. and Fennell, T. and Ruan, J. and Homer, N. and Marth, G. and Abecasis, G. and Durbin, R.},
  year = {2009},
  title = {The Sequence Alignment/Map format and SAMtools. In Bioinformatics, 25 (16), pp. 2078â€“2079.},
  publisher = {GitHub},
  journal = {Bioinformatics},
  url = {https://academic.oup.com/bioinformatics/article-lookup/doi/10.1093/bioinformatics/btp352},
}</citation>
    </citations>
</tool>
